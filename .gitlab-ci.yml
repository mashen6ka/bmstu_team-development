stages:
  - integrational-test

integrational-test:
  stage: integrational-test
  tags:
    - shell
  before_script:
    # - chmod +x ./ci-scripts/setup-database-properties.sh
    - ./ci-scripts/setup-database-properties.sh
    - ./ci-scripts/setup-docker-compose-env.sh
  script:
    - sudo docker compose -f ./application/sql/docker-compose.yml up -d
    - ./application/sql/run_database.sh
    - mvn clean -Dtest=*ITCase test
    - sudo docker compose -f ./application/sql/docker-compose.yml down